<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Abhan</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Abhan">
    <link href="stylesheets/bootstrap-combined.min.css" rel="stylesheet">
    <link href="stylesheets/app.css" rel="stylesheet">
    <link href="stylesheets/app-theme-changeimagecolor.css" rel="stylesheet">
    <link href="http://fonts.googleapis.com/css?family=Roboto:400,300italic,100,100italic,300" rel="stylesheet" type="text/css">
  </head>
  <body data-target=".content-nav">
    <header>
      <div class="container">
        <div class="row">
          <div class="span5">
            <h1>Change Image Color</h1>
          </div>
          <div class="span7">
            <menu>
              <ul>
                <li><a href="https://github.com/Abhan/AndroidDemo/tree/master/ColorChangeProgram" data-title="GitHub Project" class="menu github"><img src="images/icon-github.png" alt="GitHub"/></a></li>
              </ul>
            </menu>
          </div>
      </div>
    </header>
    <section id="body">
      <div class="container">
        <div class="row">
          <div class="span9">
            <h3 id="introduction">Introduction</h3>
            <p>This project shows how to change <code>Image</code> color programmatically. This technique is based on change <code>HSV</code> value pixel by pixel.</p>

            <h3 id="codesnippet">Code Snippet</h3>
			<p><code>ColorMatrix</code> is used to change current <code>HSV</code> value. This method counts the next value using 
current passed value based on <code>Math.sin</code> and <code>Math.cos</code> function. We need to set that <code>ColorMatrix</code> filter to our <code>Bitmap</code>.</p>
			
			<p><code>HSV</code> array has 
			<pre>HSV[0] - Hue (Range From 0 to 360) 
HSV[1] - Saturation (Range From 0.0 to 1.0) 
HSV[2] - Lightness (Range From 0.0 to 1.0)</pre></p>

			<p>First of all create a <code>Activity</code> like as below.</p>
			<pre> public class ColorChangeActivity extends Activity {
	private Bitmap mSourceBitmap; 
	private ImageView mImageView;
	...
				
	@Override
	public void onCreate() {
		super.onCreate();
		mImageView = (ImageView) findViewById(R.id.myimage);
		mSourceBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.yourimage);
		...
	}
} </pre>
			<p>Create one more method <code>cleanValue</code> to get min value.</p>
			<pre>private float cleanValue(float val, float limit) {
	return Math.min(limit, Math.max(-limit, val));
}</pre>
			
			<pre>private void adjustHue(ColorMatrix colorMatrix, float value) {
	value = cleanValue(value, 180f) / 180f * (float) Math.PI;
	if (value == 0) {
		return;
	}
	float cosVal = (float) Math.cos(value);
	float sinVal = (float) Math.sin(value);
	float lumR = 0.213f;
	float lumG = 0.715f;
	float lumB = 0.072f;
	float[] mat = new float[] {
		lumR + cosVal * (1 - lumR) + sinVal * (-lumR),
		lumG + cosVal * (-lumG) + sinVal * (-lumG),
		lumB + cosVal * (-lumB) + sinVal * (1 - lumB), 0, 0,
		lumR + cosVal * (-lumR) + sinVal * (0.143f),
		lumG + cosVal * (1 - lumG) + sinVal * (0.140f),
		lumB + cosVal * (-lumB) + sinVal * (-0.283f), 0, 0,
		lumR + cosVal * (-lumR) + sinVal * (-(1 - lumR)),
		lumG + cosVal * (-lumG) + sinVal * (lumG),
		lumB + cosVal * (1 - lumB) + sinVal * (lumB), 0, 0, 0f, 0f, 0f,
		1f, 0f, 0f, 0f, 0f, 0f, 1f };
	colorMatrix.postConcat(new ColorMatrix(mat));
}</pre>

	<pre>private ColorFilter adjustHue(float value) {
	ColorMatrix colorMatrix = new ColorMatrix();
	adjustHue(colorMatrix, value);
	return new ColorMatrixColorFilter(colorMatrix);
}</pre>

	<p>To get next or previous color, you can use <code>Left</code> or <code>Right</code> arrow.</p>
			
			<h3 id="screenshots">Screen Shots</h3>
			<p><img src="images/colorchange.png" alt="ColorChange"/></p>
			
			<h3 id="download">Download</h3>
			<p> Full Source is available from <a href="https://github.com/Abhan/AndroidDemo/tree/master/ColorChangeProgram">Here</a>.</p> 
			
			<h3 id="license">License</h3>
            <pre>Copyright 2013.
			
Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0
   
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</pre>
          </div>
          <div class="span3">
            <div class="content-nav" data-spy="affix" data-offset-top="80">
              <ul class="nav nav-tabs nav-stacked primary">
                <li><a href="#introduction">Introduction</a></li>
                <li><a href="#codesnippet">Code Snippet</a></li>
				<li><a href="#screenshots">Screen Shots</a></li>
				<li><a href="#download">Download</a></li>
                <li><a href="#license">License</a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="javascripts/bootstrap.min.js"></script>
    <script src="javascripts/jquery.smooth-scroll.min.js"></script>
    <script src="javascripts/jquery-maven-artifact.min.js"></script>
    <script src="javascripts/prettify.js"></script>
    <script type="text/javascript">
      $(function() {
        prettyPrint();

        $('body').scrollspy();
        
        $('a').smoothScroll();

        $('.menu').tooltip({
          placement: 'bottom',
          trigger: 'hover',
          container: 'body',
          delay: {
            show: 500,
            hide: 0
          }
        });
      });
    </script>
  </body>
</html>
